                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ANSI-C Compiler
                                      3 ; Version 4.2.0 #13081 (Linux)
                                      4 ;--------------------------------------------------------
                                      5 	.module io_kraft80
                                      6 	.optsdcc -mz80
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _lcd_clear
                                     12 	.globl _pos
                                     13 	.globl _lgets_noecho
                                     14 	.globl _lgets
                                     15 	.globl _putstr
                                     16 	.globl _putstr_lcd
                                     17 	.globl _getchar
                                     18 	.globl _putchar
                                     19 	.globl _setleds
                                     20 	.globl _readbuttons
                                     21 	.globl _putchar_lcd
                                     22 	.globl _lcd_home
                                     23 	.globl _lcd_home2
                                     24 	.globl _lcd_begin
                                     25 	.globl _video_setpos
                                     26 	.globl _video_out
                                     27 	.globl _video_in
                                     28 	.globl _video_begin
                                     29 	.globl _serial_getchar
                                     30 	.globl _serial_kbhit
                                     31 	.globl _serial_putchar
                                     32 ;--------------------------------------------------------
                                     33 ; special function registers
                                     34 ;--------------------------------------------------------
                                     35 ;--------------------------------------------------------
                                     36 ; ram data
                                     37 ;--------------------------------------------------------
                                     38 	.area _DATA
      000000                         39 _pos::
      000000                         40 	.ds 2
                                     41 ;--------------------------------------------------------
                                     42 ; ram data
                                     43 ;--------------------------------------------------------
                                     44 	.area _INITIALIZED
                                     45 ;--------------------------------------------------------
                                     46 ; absolute external ram data
                                     47 ;--------------------------------------------------------
                                     48 	.area _DABS (ABS)
                                     49 ;--------------------------------------------------------
                                     50 ; global & static initialisations
                                     51 ;--------------------------------------------------------
                                     52 	.area _HOME
                                     53 	.area _GSINIT
                                     54 	.area _GSFINAL
                                     55 	.area _GSINIT
                                     56 ;--------------------------------------------------------
                                     57 ; Home
                                     58 ;--------------------------------------------------------
                                     59 	.area _HOME
                                     60 	.area _HOME
                                     61 ;--------------------------------------------------------
                                     62 ; code
                                     63 ;--------------------------------------------------------
                                     64 	.area _CODE
                                     65 ;io-kraft80.c:14: char *lgets_noecho(char *buf, int bufsize){
                                     66 ;	---------------------------------
                                     67 ; Function lgets_noecho
                                     68 ; ---------------------------------
      000000                         69 _lgets_noecho::
      000000 DD E5            [15]   70 	push	ix
      000002 DD 21 00 00      [14]   71 	ld	ix,#0
      000006 DD 39            [15]   72 	add	ix,sp
      000008 FD 21 F8 FF      [14]   73 	ld	iy, #-8
      00000C FD 39            [15]   74 	add	iy, sp
      00000E FD F9            [10]   75 	ld	sp, iy
      000010 DD 75 FC         [19]   76 	ld	-4 (ix), l
      000013 DD 74 FD         [19]   77 	ld	-3 (ix), h
                                     78 ;io-kraft80.c:16: int i = 0;
      000016 AF               [ 4]   79 	xor	a, a
      000017 DD 77 FE         [19]   80 	ld	-2 (ix), a
      00001A DD 77 FF         [19]   81 	ld	-1 (ix), a
      00001D 7B               [ 4]   82 	ld	a, e
      00001E C6 FF            [ 7]   83 	add	a, #0xff
      000020 DD 77 F8         [19]   84 	ld	-8 (ix), a
      000023 7A               [ 4]   85 	ld	a, d
      000024 CE FF            [ 7]   86 	adc	a, #0xff
      000026 DD 77 F9         [19]   87 	ld	-7 (ix), a
      000029                         88 00111$:
                                     89 ;io-kraft80.c:20: a = getchar();
      000029 CDr61r01         [17]   90 	call	_getchar
      00002C DD 73 FA         [19]   91 	ld	-6 (ix), e
      00002F DD 72 FB         [19]   92 	ld	-5 (ix), d
      000032 DD 7E FA         [19]   93 	ld	a, -6 (ix)
      000035 DD 77 FB         [19]   94 	ld	-5 (ix), a
                                     95 ;io-kraft80.c:23: buf[i] = 0;
      000038 DD 7E FE         [19]   96 	ld	a, -2 (ix)
      00003B DD 86 FC         [19]   97 	add	a, -4 (ix)
      00003E 4F               [ 4]   98 	ld	c, a
      00003F DD 7E FF         [19]   99 	ld	a, -1 (ix)
      000042 DD 8E FD         [19]  100 	adc	a, -3 (ix)
      000045 47               [ 4]  101 	ld	b, a
                                    102 ;io-kraft80.c:22: if (a == 0x0d){
      000046 DD 7E FB         [19]  103 	ld	a, -5 (ix)
      000049 D6 0D            [ 7]  104 	sub	a, #0x0d
      00004B 20 0A            [12]  105 	jr	NZ, 00102$
                                    106 ;io-kraft80.c:23: buf[i] = 0;
      00004D AF               [ 4]  107 	xor	a, a
      00004E 02               [ 7]  108 	ld	(bc), a
                                    109 ;io-kraft80.c:24: return buf;
      00004F DD 5E FC         [19]  110 	ld	e, -4 (ix)
      000052 DD 56 FD         [19]  111 	ld	d, -3 (ix)
      000055 18 40            [12]  112 	jr	00112$
      000057                        113 00102$:
                                    114 ;io-kraft80.c:27: if (a == 0x08){
      000057 DD 7E FB         [19]  115 	ld	a, -5 (ix)
      00005A D6 08            [ 7]  116 	sub	a, #0x08
      00005C 20 17            [12]  117 	jr	NZ, 00106$
                                    118 ;io-kraft80.c:28: if (i) --i;
      00005E DD 7E FF         [19]  119 	ld	a, -1 (ix)
      000061 DD B6 FE         [19]  120 	or	a, -2 (ix)
      000064 28 C3            [12]  121 	jr	Z, 00111$
      000066 DD 6E FE         [19]  122 	ld	l, -2 (ix)
      000069 DD 66 FF         [19]  123 	ld	h, -1 (ix)
      00006C 2B               [ 6]  124 	dec	hl
      00006D DD 75 FE         [19]  125 	ld	-2 (ix), l
      000070 DD 74 FF         [19]  126 	ld	-1 (ix), h
                                    127 ;io-kraft80.c:29: continue;
      000073 18 B4            [12]  128 	jr	00111$
      000075                        129 00106$:
                                    130 ;io-kraft80.c:33: buf[i] = a;
      000075 DD 7E FB         [19]  131 	ld	a, -5 (ix)
      000078 02               [ 7]  132 	ld	(bc), a
                                    133 ;io-kraft80.c:34: if (i < (bufsize-1))
      000079 DD 7E FE         [19]  134 	ld	a, -2 (ix)
      00007C DD 96 F8         [19]  135 	sub	a, -8 (ix)
      00007F DD 7E FF         [19]  136 	ld	a, -1 (ix)
      000082 DD 9E F9         [19]  137 	sbc	a, -7 (ix)
      000085 E2r8Ar00         [10]  138 	jp	PO, 00143$
      000088 EE 80            [ 7]  139 	xor	a, #0x80
      00008A                        140 00143$:
      00008A F2r29r00         [10]  141 	jp	P, 00111$
                                    142 ;io-kraft80.c:35: ++i;
      00008D DD 34 FE         [23]  143 	inc	-2 (ix)
      000090 20 97            [12]  144 	jr	NZ, 00111$
      000092 DD 34 FF         [23]  145 	inc	-1 (ix)
      000095 18 92            [12]  146 	jr	00111$
      000097                        147 00112$:
                                    148 ;io-kraft80.c:38: }
      000097 DD F9            [10]  149 	ld	sp, ix
      000099 DD E1            [14]  150 	pop	ix
      00009B C9               [10]  151 	ret
                                    152 ;io-kraft80.c:41: char *lgets(char *buf, int bufsize){
                                    153 ;	---------------------------------
                                    154 ; Function lgets
                                    155 ; ---------------------------------
      00009C                        156 _lgets::
      00009C DD E5            [15]  157 	push	ix
      00009E DD 21 00 00      [14]  158 	ld	ix,#0
      0000A2 DD 39            [15]  159 	add	ix,sp
      0000A4 FD 21 F7 FF      [14]  160 	ld	iy, #-9
      0000A8 FD 39            [15]  161 	add	iy, sp
      0000AA FD F9            [10]  162 	ld	sp, iy
      0000AC DD 75 FC         [19]  163 	ld	-4 (ix), l
      0000AF DD 74 FD         [19]  164 	ld	-3 (ix), h
                                    165 ;io-kraft80.c:43: int i = 0;
      0000B2 AF               [ 4]  166 	xor	a, a
      0000B3 DD 77 FE         [19]  167 	ld	-2 (ix), a
      0000B6 DD 77 FF         [19]  168 	ld	-1 (ix), a
      0000B9 7B               [ 4]  169 	ld	a, e
      0000BA C6 FF            [ 7]  170 	add	a, #0xff
      0000BC DD 77 F7         [19]  171 	ld	-9 (ix), a
      0000BF 7A               [ 4]  172 	ld	a, d
      0000C0 CE FF            [ 7]  173 	adc	a, #0xff
      0000C2 DD 77 F8         [19]  174 	ld	-8 (ix), a
      0000C5                        175 00111$:
                                    176 ;io-kraft80.c:47: a = getchar();
      0000C5 CDr61r01         [17]  177 	call	_getchar
      0000C8 DD 73 FA         [19]  178 	ld	-6 (ix), e
      0000CB DD 72 FB         [19]  179 	ld	-5 (ix), d
      0000CE DD 7E FA         [19]  180 	ld	a, -6 (ix)
                                    181 ;io-kraft80.c:48: putchar(a);
      0000D1 DD 77 F9         [19]  182 	ld	-7 (ix), a
                                    183 ;	spillPairReg hl
                                    184 ;	spillPairReg hl
      0000D4 DD 77 FA         [19]  185 	ld	-6 (ix), a
      0000D7 DD 36 FB 00      [19]  186 	ld	-5 (ix), #0x00
      0000DB 6F               [ 4]  187 	ld	l, a
      0000DC 26 00            [ 7]  188 	ld	h, #0x00
                                    189 ;	spillPairReg hl
                                    190 ;	spillPairReg hl
      0000DE CDr68r01         [17]  191 	call	_putchar
                                    192 ;io-kraft80.c:50: buf[i] = 0;
      0000E1 DD 7E FE         [19]  193 	ld	a, -2 (ix)
      0000E4 DD 86 FC         [19]  194 	add	a, -4 (ix)
      0000E7 4F               [ 4]  195 	ld	c, a
      0000E8 DD 7E FF         [19]  196 	ld	a, -1 (ix)
      0000EB DD 8E FD         [19]  197 	adc	a, -3 (ix)
      0000EE 47               [ 4]  198 	ld	b, a
                                    199 ;io-kraft80.c:49: if (a == 0x0d){
      0000EF DD 7E F9         [19]  200 	ld	a, -7 (ix)
      0000F2 D6 0D            [ 7]  201 	sub	a, #0x0d
      0000F4 20 0A            [12]  202 	jr	NZ, 00102$
                                    203 ;io-kraft80.c:50: buf[i] = 0;
      0000F6 AF               [ 4]  204 	xor	a, a
      0000F7 02               [ 7]  205 	ld	(bc), a
                                    206 ;io-kraft80.c:51: return buf;
      0000F8 DD 5E FC         [19]  207 	ld	e, -4 (ix)
      0000FB DD 56 FD         [19]  208 	ld	d, -3 (ix)
      0000FE 18 40            [12]  209 	jr	00112$
      000100                        210 00102$:
                                    211 ;io-kraft80.c:53: if (a == 0x08){
      000100 DD 7E F9         [19]  212 	ld	a, -7 (ix)
      000103 D6 08            [ 7]  213 	sub	a, #0x08
      000105 20 17            [12]  214 	jr	NZ, 00106$
                                    215 ;io-kraft80.c:54: if (i) --i;
      000107 DD 7E FF         [19]  216 	ld	a, -1 (ix)
      00010A DD B6 FE         [19]  217 	or	a, -2 (ix)
      00010D 28 B6            [12]  218 	jr	Z, 00111$
      00010F DD 6E FE         [19]  219 	ld	l, -2 (ix)
      000112 DD 66 FF         [19]  220 	ld	h, -1 (ix)
      000115 2B               [ 6]  221 	dec	hl
      000116 DD 75 FE         [19]  222 	ld	-2 (ix), l
      000119 DD 74 FF         [19]  223 	ld	-1 (ix), h
                                    224 ;io-kraft80.c:55: continue;
      00011C 18 A7            [12]  225 	jr	00111$
      00011E                        226 00106$:
                                    227 ;io-kraft80.c:57: buf[i] = a;
      00011E DD 7E F9         [19]  228 	ld	a, -7 (ix)
      000121 02               [ 7]  229 	ld	(bc), a
                                    230 ;io-kraft80.c:58: if (i < (bufsize-1))
      000122 DD 7E FE         [19]  231 	ld	a, -2 (ix)
      000125 DD 96 F7         [19]  232 	sub	a, -9 (ix)
      000128 DD 7E FF         [19]  233 	ld	a, -1 (ix)
      00012B DD 9E F8         [19]  234 	sbc	a, -8 (ix)
      00012E E2r33r01         [10]  235 	jp	PO, 00143$
      000131 EE 80            [ 7]  236 	xor	a, #0x80
      000133                        237 00143$:
      000133 F2rC5r00         [10]  238 	jp	P, 00111$
                                    239 ;io-kraft80.c:59: ++i;
      000136 DD 34 FE         [23]  240 	inc	-2 (ix)
      000139 20 8A            [12]  241 	jr	NZ, 00111$
      00013B DD 34 FF         [23]  242 	inc	-1 (ix)
      00013E 18 85            [12]  243 	jr	00111$
      000140                        244 00112$:
                                    245 ;io-kraft80.c:61: }
      000140 DD F9            [10]  246 	ld	sp, ix
      000142 DD E1            [14]  247 	pop	ix
      000144 C9               [10]  248 	ret
                                    249 ;io-kraft80.c:64: void putstr(char *s){
                                    250 ;	---------------------------------
                                    251 ; Function putstr
                                    252 ; ---------------------------------
      000145                        253 _putstr::
      000145 EB               [ 4]  254 	ex	de, hl
                                    255 ;io-kraft80.c:66: while(*s){
      000146                        256 00101$:
      000146 1A               [ 7]  257 	ld	a, (de)
      000147 B7               [ 4]  258 	or	a, a
      000148 C8               [11]  259 	ret	Z
                                    260 ;io-kraft80.c:67: putchar(*(s++));
      000149 13               [ 6]  261 	inc	de
      00014A 6F               [ 4]  262 	ld	l, a
                                    263 ;	spillPairReg hl
                                    264 ;	spillPairReg hl
      00014B 26 00            [ 7]  265 	ld	h, #0x00
                                    266 ;	spillPairReg hl
                                    267 ;	spillPairReg hl
      00014D D5               [11]  268 	push	de
      00014E CDr68r01         [17]  269 	call	_putchar
      000151 D1               [10]  270 	pop	de
                                    271 ;io-kraft80.c:69: }
      000152 18 F2            [12]  272 	jr	00101$
                                    273 ;io-kraft80.c:72: void putstr_lcd(char *s){
                                    274 ;	---------------------------------
                                    275 ; Function putstr_lcd
                                    276 ; ---------------------------------
      000154                        277 _putstr_lcd::
                                    278 ;io-kraft80.c:74: while(*s){
      000154                        279 00101$:
      000154 7E               [ 7]  280 	ld	a, (hl)
      000155 B7               [ 4]  281 	or	a, a
      000156 C8               [11]  282 	ret	Z
                                    283 ;io-kraft80.c:75: putchar_lcd(*(s++));
      000157 23               [ 6]  284 	inc	hl
      000158 4F               [ 4]  285 	ld	c, a
      000159 E5               [11]  286 	push	hl
      00015A 79               [ 4]  287 	ld	a, c
      00015B CDr74r01         [17]  288 	call	_putchar_lcd
      00015E E1               [10]  289 	pop	hl
                                    290 ;io-kraft80.c:77: }
      00015F 18 F3            [12]  291 	jr	00101$
                                    292 ;io-kraft80.c:81: int getchar() __naked{
                                    293 ;	---------------------------------
                                    294 ; Function getchar
                                    295 ; ---------------------------------
      000161                        296 _getchar::
                                    297 ;io-kraft80.c:91: __endasm;
      000161 D7               [11]  298 	rst	#0x10
      000162 28 FD            [12]  299 	jr	z,_getchar
      000164 5F               [ 4]  300 	ld	e,a
      000165 16 00            [ 7]  301 	ld	d,#0
      000167 C9               [10]  302 	ret
                                    303 ;io-kraft80.c:92: }
                                    304 ;io-kraft80.c:96: int putchar (int a) __naked{
                                    305 ;	---------------------------------
                                    306 ; Function putchar
                                    307 ; ---------------------------------
      000168                        308 _putchar::
                                    309 ;io-kraft80.c:105: __endasm;
      000168 7D               [ 4]  310 	ld	a,l
      000169 CF               [11]  311 	rst	#0x08
      00016A 2E 00            [ 7]  312 	ld	l,#0
      00016C C9               [10]  313 	ret
                                    314 ;io-kraft80.c:106: }
                                    315 ;io-kraft80.c:109: void setleds(char leds) __naked{
                                    316 ;	---------------------------------
                                    317 ; Function setleds
                                    318 ; ---------------------------------
      00016D                        319 _setleds::
                                    320 ;io-kraft80.c:118: __endasm;
                           000000   321 	PORTA	.equ 0x00
      00016D D3 00            [11]  322 	out(PORTA),a
      00016F C9               [10]  323 	ret
                                    324 ;io-kraft80.c:119: }
                                    325 ;io-kraft80.c:122: unsigned char readbuttons() __naked{
                                    326 ;	---------------------------------
                                    327 ; Function readbuttons
                                    328 ; ---------------------------------
      000170                        329 _readbuttons::
                                    330 ;io-kraft80.c:131: __endasm;
                           000000   331 	PORTX	.equ 0x00
      000170 DB 00            [11]  332 	in	a,(PORTX)
      000172 6F               [ 4]  333 	ld	l,a
      000173 C9               [10]  334 	ret
                                    335 ;io-kraft80.c:132: }
                                    336 ;io-kraft80.c:135: int putchar_lcd (char a) __naked{
                                    337 ;	---------------------------------
                                    338 ; Function putchar_lcd
                                    339 ; ---------------------------------
      000174                        340 _putchar_lcd::
                                    341 ;io-kraft80.c:145: __endasm;
      000174 C5               [11]  342 	push	bc
      000175 0E 0C            [ 7]  343 	ld	c,#12
      000177 E7               [11]  344 	rst	#0x20
      000178 2E 00            [ 7]  345 	ld	l,#0
      00017A C1               [10]  346 	pop	bc
      00017B C9               [10]  347 	ret
                                    348 ;io-kraft80.c:146: }
                                    349 ;io-kraft80.c:149: void lcd_home() __naked{
                                    350 ;	---------------------------------
                                    351 ; Function lcd_home
                                    352 ; ---------------------------------
      00017C                        353 _lcd_home::
                                    354 ;io-kraft80.c:159: __endasm;
      00017C C5               [11]  355 	push	bc
      00017D 0E 0A            [ 7]  356 	ld	c,#10
      00017F E7               [11]  357 	rst	#0x20
      000180 C1               [10]  358 	pop	bc
      000181 C9               [10]  359 	ret
                                    360 ;io-kraft80.c:160: }
                                    361 ;io-kraft80.c:163: void lcd_home2() __naked{
                                    362 ;	---------------------------------
                                    363 ; Function lcd_home2
                                    364 ; ---------------------------------
      000182                        365 _lcd_home2::
                                    366 ;io-kraft80.c:173: __endasm;
      000182 C5               [11]  367 	push	bc
      000183 0E 0B            [ 7]  368 	ld	c,#11
      000185 E7               [11]  369 	rst	#0x20
      000186 C1               [10]  370 	pop	bc
      000187 C9               [10]  371 	ret
                                    372 ;io-kraft80.c:174: }
                                    373 ;io-kraft80.c:177: void lcd_clear() __naked{
                                    374 ;	---------------------------------
                                    375 ; Function lcd_clear
                                    376 ; ---------------------------------
      000188                        377 _lcd_clear::
                                    378 ;io-kraft80.c:187: __endasm;
      000188 C5               [11]  379 	push	bc
      000189 0E 09            [ 7]  380 	ld	c,#9
      00018B E7               [11]  381 	rst	#0x20
      00018C C1               [10]  382 	pop	bc
      00018D C9               [10]  383 	ret
                                    384 ;io-kraft80.c:188: }
                                    385 ;io-kraft80.c:191: void lcd_begin() __naked{
                                    386 ;	---------------------------------
                                    387 ; Function lcd_begin
                                    388 ; ---------------------------------
      00018E                        389 _lcd_begin::
                                    390 ;io-kraft80.c:201: __endasm;
      00018E C5               [11]  391 	push	bc
      00018F 0E 08            [ 7]  392 	ld	c,#8
      000191 E7               [11]  393 	rst	#0x20
      000192 C1               [10]  394 	pop	bc
      000193 C9               [10]  395 	ret
                                    396 ;io-kraft80.c:202: }
                                    397 ;io-kraft80.c:207: void video_setpos(int row, int col){
                                    398 ;	---------------------------------
                                    399 ; Function video_setpos
                                    400 ; ---------------------------------
      000194                        401 _video_setpos::
                                    402 ;io-kraft80.c:212: pos = 160*row + col;
      000194 4D               [ 4]  403 	ld	c, l
      000195 44               [ 4]  404 	ld	b, h
      000196 29               [11]  405 	add	hl, hl
      000197 29               [11]  406 	add	hl, hl
      000198 09               [11]  407 	add	hl, bc
      000199 29               [11]  408 	add	hl, hl
      00019A 29               [11]  409 	add	hl, hl
      00019B 29               [11]  410 	add	hl, hl
      00019C 29               [11]  411 	add	hl, hl
      00019D 29               [11]  412 	add	hl, hl
      00019E 4D               [ 4]  413 	ld	c, l
      00019F 44               [ 4]  414 	ld	b, h
      0001A0 79               [ 4]  415 	ld	a, c
      0001A1 21r00r00         [10]  416 	ld	hl, #_pos
      0001A4 83               [ 4]  417 	add	a, e
      0001A5 77               [ 7]  418 	ld	(hl), a
      0001A6 23               [ 6]  419 	inc	hl
      0001A7 78               [ 4]  420 	ld	a, b
      0001A8 8A               [ 4]  421 	adc	a, d
      0001A9 77               [ 7]  422 	ld	(hl), a
                                    423 ;io-kraft80.c:224: __endasm;
      0001AA F3               [ 4]  424 	di
      0001AB 2Ar00r00         [16]  425 	ld	hl,(_pos)
      0001AE 7D               [ 4]  426 	ld	a,l
      0001AF D3 51            [11]  427 	out	(0x51),a
      0001B1 7C               [ 4]  428 	ld	a,h
      0001B2 D3 52            [11]  429 	out	(0x52),a
      0001B4 FB               [ 4]  430 	ei
                                    431 ;io-kraft80.c:225: }
      0001B5 C9               [10]  432 	ret
                                    433 ;io-kraft80.c:228: void video_out(unsigned char b){
                                    434 ;	---------------------------------
                                    435 ; Function video_out
                                    436 ; ---------------------------------
      0001B6                        437 _video_out::
                                    438 ;io-kraft80.c:237: __endasm;
      0001B6 D3 50            [11]  439 	out	(0x50),a
                                    440 ;io-kraft80.c:238: }
      0001B8 C9               [10]  441 	ret
                                    442 ;io-kraft80.c:241: int video_in(void){
                                    443 ;	---------------------------------
                                    444 ; Function video_in
                                    445 ; ---------------------------------
      0001B9                        446 _video_in::
                                    447 ;io-kraft80.c:253: __endasm;
      0001B9 DB 50            [11]  448 	in	a,(0x50)
      0001BB 5F               [ 4]  449 	ld	e,a
      0001BC 16 00            [ 7]  450 	ld	d,#0
      0001BE C9               [10]  451 	ret
                                    452 ;io-kraft80.c:254: }
      0001BF C9               [10]  453 	ret
                                    454 ;io-kraft80.c:257: void video_begin(int mode){
                                    455 ;	---------------------------------
                                    456 ; Function video_begin
                                    457 ; ---------------------------------
      0001C0                        458 _video_begin::
                                    459 ;io-kraft80.c:269: __endasm;
      0001C0 22r00r00         [16]  460 	ld	(_pos), hl
      0001C3 7D               [ 4]  461 	ld	a,l
      0001C4 D3 53            [11]  462 	out	(0x53),a
                                    463 ;io-kraft80.c:271: video_setpos(row,0);
      0001C6 11 00 00         [10]  464 	ld	de, #0x0000
      0001C9 21 00 00         [10]  465 	ld	hl, #0x0000
      0001CC CDr94r01         [17]  466 	call	_video_setpos
                                    467 ;io-kraft80.c:273: for (row = 0; row < 240; row++){
      0001CF 01 00 00         [10]  468 	ld	bc, #0x0000
                                    469 ;io-kraft80.c:275: for (col = 0; col < 160; col++) video_out(0x00);
      0001D2                        470 00109$:
      0001D2 11 00 00         [10]  471 	ld	de, #0x0000
      0001D5                        472 00103$:
      0001D5 C5               [11]  473 	push	bc
      0001D6 D5               [11]  474 	push	de
      0001D7 AF               [ 4]  475 	xor	a, a
      0001D8 CDrB6r01         [17]  476 	call	_video_out
      0001DB D1               [10]  477 	pop	de
      0001DC C1               [10]  478 	pop	bc
      0001DD 13               [ 6]  479 	inc	de
      0001DE 7B               [ 4]  480 	ld	a, e
      0001DF D6 A0            [ 7]  481 	sub	a, #0xa0
      0001E1 7A               [ 4]  482 	ld	a, d
      0001E2 17               [ 4]  483 	rla
      0001E3 3F               [ 4]  484 	ccf
      0001E4 1F               [ 4]  485 	rra
      0001E5 DE 80            [ 7]  486 	sbc	a, #0x80
      0001E7 38 EC            [12]  487 	jr	C, 00103$
                                    488 ;io-kraft80.c:273: for (row = 0; row < 240; row++){
      0001E9 03               [ 6]  489 	inc	bc
      0001EA 79               [ 4]  490 	ld	a, c
      0001EB D6 F0            [ 7]  491 	sub	a, #0xf0
      0001ED 78               [ 4]  492 	ld	a, b
      0001EE 17               [ 4]  493 	rla
      0001EF 3F               [ 4]  494 	ccf
      0001F0 1F               [ 4]  495 	rra
      0001F1 DE 80            [ 7]  496 	sbc	a, #0x80
      0001F3 38 DD            [12]  497 	jr	C, 00109$
                                    498 ;io-kraft80.c:277: }
      0001F5 C9               [10]  499 	ret
                                    500 ;io-kraft80.c:280: int serial_getchar() __naked{
                                    501 ;	---------------------------------
                                    502 ; Function serial_getchar
                                    503 ; ---------------------------------
      0001F6                        504 _serial_getchar::
                                    505 ;io-kraft80.c:291: __endasm;
      0001F6 0E 03            [ 7]  506 	ld	c,#3
      0001F8 E7               [11]  507 	rst	#0x20
      0001F9 28 FB            [12]  508 	jr	z,_serial_getchar
      0001FB 5F               [ 4]  509 	ld	e,a
      0001FC 16 00            [ 7]  510 	ld	d,#0
      0001FE C9               [10]  511 	ret
                                    512 ;io-kraft80.c:292: }
                                    513 ;io-kraft80.c:295: int serial_kbhit() __naked{
                                    514 ;	---------------------------------
                                    515 ; Function serial_kbhit
                                    516 ; ---------------------------------
      0001FF                        517 _serial_kbhit::
                                    518 ;io-kraft80.c:307: __endasm;
      0001FF 0E 02            [ 7]  519 	ld	c,#2
      000201 E7               [11]  520 	rst	#0x20
      000202 16 00            [ 7]  521 	ld	d,#0
      000204 1E 00            [ 7]  522 	ld	e,#0
      000206 C8               [11]  523 	ret	z
      000207 1C               [ 4]  524 	inc	e
      000208 C9               [10]  525 	ret
                                    526 ;io-kraft80.c:308: }
                                    527 ;io-kraft80.c:311: int serial_putchar (int a) __naked{
                                    528 ;	---------------------------------
                                    529 ; Function serial_putchar
                                    530 ; ---------------------------------
      000209                        531 _serial_putchar::
                                    532 ;io-kraft80.c:321: __endasm;
      000209 7D               [ 4]  533 	ld	a,l
      00020A 0E 01            [ 7]  534 	ld	c,#1
      00020C E7               [11]  535 	rst	#0x20
      00020D 2E 00            [ 7]  536 	ld	l,#0
      00020F C9               [10]  537 	ret
                                    538 ;io-kraft80.c:322: }
                                    539 	.area _CODE
                                    540 	.area _INITIALIZER
                                    541 	.area _CABS (ABS)
